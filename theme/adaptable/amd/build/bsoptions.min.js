define("theme_adaptable/bsoptions",["jquery","core/log"],(function($,log){return log.debug("Adaptable Bootstrap AMD opt in functions"),{init:function(data){if($(document).ready((function($){var navbar=document.getElementById("main-navbar");if(data.stickynavbar&&null!==navbar){const screenmd=992,screensm=768;var currentWindowSize,windowWidth=$(window).width();currentWindowSize=windowWidth<screensm?1:windowWidth<screenmd?2:3;var header=document.getElementById("adaptable-page-header-wrapper");header.classList.add("sticky");var aboveHeader=document.getElementById("header1");aboveHeader||(aboveHeader=document.getElementById("header2"));var courseIndex=document.getElementById("theme_adaptable-drawers-courseindex"),sidePost=document.getElementById("theme_adaptable-drawers-sidepost"),drawerTogglers=document.getElementsByClassName("drawer-toggler"),page=document.getElementById("page"),pageScrollTop=page.scrollTop,currentPageScrollTop=pageScrollTop,headerHeight=0,headerNoNavbar=0,navbarHeight=navbar.getBoundingClientRect().height;windowWidth>=screenmd&&(headerHeight=header.getBoundingClientRect().height,headerNoNavbar=headerHeight-navbarHeight);var aboveHeaderHeight=aboveHeader.getBoundingClientRect().height,drawerPaddingTop=0,newDrawerPaddingTop=0,pageMarginTop=0,newPageMarginTop=0,headerTop=0,newHeaderTop=0;if(windowWidth<screenmd?(pageScrollTop=aboveHeaderHeight,headerTop=0,pageMarginTop=aboveHeaderHeight):(pageScrollTop>headerNoNavbar&&(pageScrollTop=headerNoNavbar),headerTop=-pageScrollTop,pageMarginTop=headerHeight-pageScrollTop),page.style.marginTop=pageMarginTop+"px",header.style.top=headerTop+"px",(courseIndex||sidePost)&&(drawerPaddingTop=windowWidth<screenmd?0:headerHeight-pageScrollTop,courseIndex&&(courseIndex.style.paddingTop=drawerPaddingTop+"px"),sidePost&&(sidePost.style.paddingTop=drawerPaddingTop+"px"),courseIndex||sidePost))if(windowWidth<screensm)for(let dt=0;dt<drawerTogglers.length;dt++)drawerTogglers[dt].style.top=null;else{var dtAdditional=22;windowWidth>=screensm&&windowWidth<screenmd&&(dtAdditional+=aboveHeaderHeight);var dtt=drawerPaddingTop+dtAdditional;for(let dt=0;dt<drawerTogglers.length;dt++)drawerTogglers[dt].style.top=dtt+"px"}var makeNavbarSticky=function(){let update=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(pageScrollTop=page.scrollTop,windowWidth<screenmd){if(!update&&currentPageScrollTop==aboveHeaderHeight&&pageScrollTop>=aboveHeaderHeight)return;pageScrollTop=aboveHeaderHeight,newHeaderTop=0,newPageMarginTop=aboveHeaderHeight}else{if(!update&&currentPageScrollTop==headerNoNavbar&&pageScrollTop>=headerNoNavbar)return;0==headerHeight&&update&&(headerHeight=header.getBoundingClientRect().height,navbarHeight=navbar.getBoundingClientRect().height,headerNoNavbar=headerHeight-navbarHeight),pageScrollTop>headerNoNavbar&&(pageScrollTop=headerNoNavbar),newHeaderTop=-pageScrollTop,newPageMarginTop=headerHeight-pageScrollTop}if(currentPageScrollTop=pageScrollTop,newHeaderTop!=headerTop&&(header.style.top=newHeaderTop+"px",headerTop=newHeaderTop),newPageMarginTop!=pageMarginTop&&(page.style.marginTop=newPageMarginTop+"px",pageMarginTop=newPageMarginTop),(courseIndex||sidePost)&&(newDrawerPaddingTop=windowWidth<screensm?-1:windowWidth<screenmd?0:headerHeight-pageScrollTop)!=drawerPaddingTop&&(newDrawerPaddingTop<0&&(newDrawerPaddingTop=0),drawerPaddingTop=newDrawerPaddingTop,courseIndex&&(courseIndex.style.paddingTop=drawerPaddingTop+"px"),sidePost&&(sidePost.style.paddingTop=drawerPaddingTop+"px"),courseIndex||sidePost))if(windowWidth<screensm)for(let dt=0;dt<drawerTogglers.length;dt++)drawerTogglers[dt].style.top=null;else{var dtAdditional=22;windowWidth>=screensm&&windowWidth<screenmd&&(dtAdditional+=aboveHeaderHeight);var dtt=drawerPaddingTop+dtAdditional;for(let dt=0;dt<drawerTogglers.length;dt++)drawerTogglers[dt].style.top=dtt+"px"}};page.onscroll=function(){makeNavbarSticky()};var isFixed=0,stickything=$(".stickything"),body=$("body");windowWidth<screenmd?(stickything.addClass("fixed-top"),body.addClass("page-header-margin"),isFixed=1):(stickything.removeClass("fixed-top"),body.removeClass("page-header-margin")),$(window).resize((function(){(windowWidth=$(window).width())<screensm?1!=currentWindowSize&&(makeNavbarSticky(!0),currentWindowSize=1):windowWidth<screenmd?2!=currentWindowSize&&(makeNavbarSticky(!0),currentWindowSize=2):3!=currentWindowSize&&(setTimeout((function(){makeNavbarSticky(!0)}),500),currentWindowSize=3),windowWidth<screenmd?0===isFixed&&(stickything.addClass("fixed-top"),body.addClass("page-header-margin"),isFixed=1):1===isFixed&&(stickything.removeClass("fixed-top"),body.removeClass("page-header-margin"),isFixed=0)}))}$(".moodlewidth").click((function(){$("#page").hasClass("fullin")?($("#page").removeClass("fullin"),M.util.set_user_preference("theme_adaptable_full","nofull")):($("#page").addClass("fullin"),M.util.set_user_preference("theme_adaptable_full","fullin"))})),$("#openoverlaymenu").click((function(){$("#conditionalmenu").toggleClass("open")})),$("#overlaymenuclose").click((function(){$("#conditionalmenu").toggleClass("open")})),$(".dropdown-menu a.dropdown-toggle").on("click",(function(){var $el=$(this),$parent=$(this).offsetParent(".dropdown-menu");return $(this).next().hasClass("show")||$(this).parents(".dropdown-menu").first().find(".show").removeClass("show"),$(this).next(".dropdown-menu").toggleClass("show"),$(this).parent("li").toggleClass("show"),$(this).parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",(function(){$(".dropdown-menu .show").removeClass("show")})),$parent.parent().hasClass("navbar-nav")||$el.next().css({top:$el[0].offsetTop,left:$parent.outerWidth()-4}),!1}))})),data.stickynavbar){var shiftWindow=function(){scrollBy(0,-50)};location.hash&&shiftWindow(),window.addEventListener("hashchange",shiftWindow)}}}}));

//# sourceMappingURL=bsoptions.min.js.map